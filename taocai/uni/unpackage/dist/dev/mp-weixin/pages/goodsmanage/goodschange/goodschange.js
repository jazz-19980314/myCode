(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goodsmanage/goodschange/goodschange"],{148:
/*!*******************************************************************************************!*\
  !*** D:/taocai-uniapp/main.js?{"page":"pages%2Fgoodsmanage%2Fgoodschange%2Fgoodschange"} ***!
  \*******************************************************************************************/
/*! no static exports found */function(e,t,i){"use strict";(function(e){i(/*! uni-pages */4);s(i(/*! vue */2));var t=s(i(/*! ./pages/goodsmanage/goodschange/goodschange.vue */149));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},149:
/*!**********************************************************************!*\
  !*** D:/taocai-uniapp/pages/goodsmanage/goodschange/goodschange.vue ***!
  \**********************************************************************/
/*! no static exports found */function(e,t,i){"use strict";i.r(t);var s=i(/*! ./goodschange.vue?vue&type=template&id=f02c1580& */150),o=i(/*! ./goodschange.vue?vue&type=script&lang=js& */152);for(var a in o)"default"!==a&&function(e){i.d(t,e,(function(){return o[e]}))}(a);i(/*! ./goodschange.vue?vue&type=style&index=0&lang=scss& */154);var l,n=i(/*! ../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */10),d=Object(n["default"])(o["default"],s["render"],s["staticRenderFns"],!1,null,null,null,!1,s["components"],l);d.options.__file="pages/goodsmanage/goodschange/goodschange.vue",t["default"]=d.exports},150:
/*!*****************************************************************************************************!*\
  !*** D:/taocai-uniapp/pages/goodsmanage/goodschange/goodschange.vue?vue&type=template&id=f02c1580& ***!
  \*****************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,i){"use strict";i.r(t);var s=i(/*! -!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goodschange.vue?vue&type=template&id=f02c1580& */151);i.d(t,"render",(function(){return s["render"]})),i.d(t,"staticRenderFns",(function(){return s["staticRenderFns"]})),i.d(t,"recyclableRender",(function(){return s["recyclableRender"]})),i.d(t,"components",(function(){return s["components"]}))},151:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/taocai-uniapp/pages/goodsmanage/goodschange/goodschange.vue?vue&type=template&id=f02c1580& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,i){"use strict";var s;i.r(t),i.d(t,"render",(function(){return o})),i.d(t,"staticRenderFns",(function(){return l})),i.d(t,"recyclableRender",(function(){return a})),i.d(t,"components",(function(){return s}));var o=function(){var e=this,t=e.$createElement;e._self._c},a=!1,l=[];o._withStripped=!0},152:
/*!***********************************************************************************************!*\
  !*** D:/taocai-uniapp/pages/goodsmanage/goodschange/goodschange.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************************/
/*! no static exports found */function(e,t,i){"use strict";i.r(t);var s=i(/*! -!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goodschange.vue?vue&type=script&lang=js& */153),o=i.n(s);for(var a in s)"default"!==a&&function(e){i.d(t,e,(function(){return s[e]}))}(a);t["default"]=o.a},153:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/taocai-uniapp/pages/goodsmanage/goodschange/goodschange.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){i.e(/*! require.ensure | components/bjx-inputs/bjx-inputs */"components/bjx-inputs/bjx-inputs").then(function(){return resolve(i(/*! @/components/bjx-inputs/bjx-inputs.vue */279))}.bind(null,i)).catch(i.oe)},o={components:{BjxInputs:s},data:function(){return{title:"",goodsname:"",maidian:"",goodsdetail:[],imgList:[],guigeShow:!0,value:[],label:[],radio:"",goodsprice:"",kucun:"",guigeList:[],guigeListTwo:[],moresizelist:[],value5:[],value1:[],label1:[],list1:[],value2:[],label2:[],list2:[],value3:[],label3:[],list3:[],value4:[],label4:[],list4:[],onesizelist:[],goodsId:"",changeimges:[],tempChangeList:[],tempimgList:[],tmplabel:[],categoryFirst:"",categorymorelist:null,biaozhun:!0}},onLoad:function(e){var t=this;this.$http.userInfo().then((function(e){t.biaozhun="-1"!=e.data.data.permissions.indexOf("mall:goodscategorymore:index")}),(function(e){console.log(e)}));var i=JSON.parse(decodeURIComponent(e.data));this.goodsId=i.id,this.getgoodscategory(),this.getcategorymore(),this.$http.getcategorymore().then((function(e){t.categorymorelist=e.data})),this.getgoodsspec(),this.getdeliveryplace(),this.getfreighttemplat(),this.getGoodsDetail()},methods:{getGoodsDetail:function(){var e=this;this.$http.getOneGoods({id:this.goodsId}).then((function(t){if(e.goodsdetail=t.data.data,1==e.goodsdetail.specType)for(var i=0;i<e.goodsdetail.skus.length;i++)delete e.goodsdetail.skus[i].id,delete e.goodsdetail.skus[i].spuId,delete e.goodsdetail.skus[i].tenantId,delete e.goodsdetail.skus[i].specs[0].id,delete e.goodsdetail.skus[i].specs[0].spuId,delete e.goodsdetail.skus[i].specs[0].tenantId,delete e.goodsdetail.skus[i].specs[0].skuId;e.goodsname=t.data.data.name,e.maidian=t.data.data.sellPoint,e.tempChangeList=t.data.data.picUrls,e.imgList=t.data.data.picUrls,e.radio=e.goodsdetail.specType,e.moresizelist=e.goodsdetail.skus,console.log(e.moresizelist);var s=JSON.parse(JSON.stringify(e.list1));if(e.label1=s.filter((function(t){return t.value==e.goodsdetail.categoryFirst})),e.tmplabel=e.label1[0].children.filter((function(t){return t.value==e.goodsdetail.categorySecond})),e.label1.push(e.tmplabel[0]),e.goodsdetail.categoryThird){var o=null;o=e.categorymorelist.filter((function(t){return t.id==e.goodsdetail.categoryThird})),e.label2=e.list2.filter((function(e){return e.value==o[0].parentId}));var a=e.label2[0].children.filter((function(e){return e.value==o[0].id}));e.label2.push(a[0])}e.label3=e.list3.filter((function(t){return t.value==e.goodsdetail.freightTemplatId})),e.label4=e.list4.filter((function(t){return t.value==e.goodsdetail.deliveryPlaceId})),e.goodsprice=e.goodsdetail.skus[0].salesPrice.toString(),e.kucun=e.goodsdetail.skus[0].stock}))},getgoodscategory:function(){var e=this;this.$http.getgoodscategory({current:1,size:20}).then((function(t){var i=t.data.data;e.list1=i.map((function(e){return{label:e.name,value:e.id,children:e.children}})),e.list1.forEach((function(e){e.children=e.children.map((function(e){return{label:e.name,value:e.id}}))}))}))},getcategorymore:function(){var e=this;this.$http.getgoodscategorymore().then((function(t){var i=t.data.data;if(i){e.list2=i.map((function(e){return{label:e.name,value:e.id,children:e.children}}));for(var s=0;s<e.list2.length;s++)e.list2[s].children=e.list2[s].children.map((function(e){return{label:e.name,value:e.id}}))}}))},getgoodsspec:function(){var e=this;this.$http.getgoodsspec({current:1,size:20}).then((function(t){var i=t.data.data;e.guigeList=i.map((function(e){return{label:e.name,value:e.id}})),1==e.radio&&(e.moresizelist=e.goodsdetail.skus)}))},getdeliveryplace:function(){var e=this;this.$http.getdeliveryplace({current:1,size:20}).then((function(t){var i=t.data.data.records;e.list4=i.map((function(e){return{label:e.place,value:e.id}}))}))},getfreighttemplat:function(){var e=this;this.$http.getfreighttemplat({current:1,size:20}).then((function(t){var i=t.data.data.records;e.list3=i.map((function(e){return{label:e.name,value:e.id}}))}))},ChooseImage:function(){var t=this;e.chooseImage({count:5,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(i){t.imgList=t.imgList.concat(i.tempFilePaths);for(var s=i.tempFilePaths,o=0;o<s.length;o++)e.uploadFile({url:"https://mall.program66.com/admin/file/uploads",filePath:s[o],header:{Authorization:"Bearer "+e.getStorageSync("token")},name:"file",success:function(e){var i=JSON.parse(e.data);t.changeimges=t.changeimges.concat(i.link)},complete:function(){Number(o);t.changeimges.length>0&&(t.tempChangeList=t.tempChangeList.concat(t.changeimges))}})}})},ViewImage:function(t){e.previewImage({urls:this.imgList,current:t.currentTarget.dataset.url})},DelImg:function(t){var i=this;e.showModal({title:"提示",content:"您确定要删除这张图片吗？",cancelText:"再看看",confirmText:"删除",success:function(e){e.confirm&&(i.imgList.splice(t.currentTarget.dataset.index,1),i.tempChangeList.splice(t.currentTarget.dataset.index,1))}})},handleTap:function(e){this.$refs[e].show()},handleChange:function(e){},handleConfirm:function(e){var t=this;this.moresizelist.push({specs:[{specId:e.item[0].value,specName:e.item[0].label,specValueId:"",specValueName:""}],specIds:e.item[0].value,picUrl:"",picUrls:[],salesPrice:"",stock:"",enable:"1"}),this.$http.getgoodsspecTwo({id:e.item[0].value}).then((function(e){t.guigeListTwo=e.data.data.map((function(e){return{label:e.name,value:e.id}}))}))},handleConfirm5:function(e){var t=[];t.push(this.moresizelist[this.moresizelist.length-1]),t.forEach((function(t){t.specs.forEach((function(t){t.specValueId=e.item[0].value,t.specValueName=e.item[0].label}))})),t.forEach((function(e){e.specIds=e.specs[0].specId+"-"+e.specs[0].specValueId}))},deleteGoods:function(t){var i=this;e.showModal({title:"提示",content:"你确定要删除这个规格吗",success:function(e){e.confirm?i.moresizelist.splice(t,1):e.cancel}})},handleConfirm1:function(e){this.label1=e.item},handleConfirm2:function(e){this.label2=e.item},handleConfirm3:function(e){this.label3=e.item},handleConfirm4:function(e){this.label4=e.item},handleCancel:function(e){},RadioChange:function(e){this.radio=e.detail.value,this.goodsdetail.skus=[],this.moresizelist=[],this.goodsprice="",this.kucun=""},checkshow:function(){this.guigeShow=!this.guigeShow,this.ishow=!1},handelAdd:function(){this.ishow=!0},timeoutsuc:function(){e.navigateBack()},putgoods:function(){if(0==this.radio&&(this.onesizelist.push({specs:[],specIds:"",picUrl:"",picUrls:[],salesPrice:this.goodsprice,stock:this.kucun,enable:"1"}),this.goodsdetail.name=this.goodsname,this.goodsdetail.picUrls=this.tempChangeList,this.goodsdetail.categoryId=[this.label1[0].value,this.label1[1].value],this.goodsdetail.sellPoint=this.maidian,this.goodsdetail.price="",this.goodsdetail.spuCode="",this.goodsdetail.specType=this.radio,this.goodsdetail.saleNum="",this.goodsdetail.createTime="",this.goodsdetail.updateTime="",this.goodsdetail.shelf="1",this.goodsdetail.pointsGiveSwitch="0",this.goodsdetail.pointsDeductSwitch="0",this.goodsdetail.categoryThird=0==this.label2.length?"":this.label2[1].value,this.goodsdetail.freightTemplatId=this.label3[0].value,this.goodsdetail.deliveryPlaceId=this.label4[0].value,this.goodsdetail.ensureIds=[],this.goodsdetail.skus=this.onesizelist,this.goodsdetail.description="",this.goodsdetail.spuSpec=this.goodsdetail.spuSpec,this.goodsdetail.categoryFirst=this.label1[0].value,this.goodsdetail.categorySecond=this.label1[1].value),1==this.radio){for(var t=[],i=0;i<this.moresizelist.length;i++)t.push({id:this.moresizelist[i].specs[0].specId,value:"",leaf:[{id:this.moresizelist[i].specs[0].specValueId,value:""}]});this.goodsdetail.name=this.goodsname,this.goodsdetail.picUrls=this.tempChangeList,this.goodsdetail.categoryId=[this.label1[0].value,this.label1[1].value],this.goodsdetail.sellPoint=this.maidian,this.goodsdetail.price="",this.goodsdetail.spuCode="",this.goodsdetail.specType=this.radio,this.goodsdetail.saleNum="",this.goodsdetail.createTime="",this.goodsdetail.updateTime="",this.goodsdetail.shelf="1",this.goodsdetail.pointsGiveSwitch="0",this.goodsdetail.pointsDeductSwitch="0",this.goodsdetail.categoryThird=0==this.label2.length?"":this.label2[1].value,this.goodsdetail.freightTemplatId=this.label3[0].value,this.goodsdetail.deliveryPlaceId=this.label4[0].value,this.goodsdetail.ensureIds=[],this.goodsdetail.skus=this.moresizelist,this.goodsdetail.description="",this.goodsdetail.spuSpec=t,this.goodsdetail.categoryFirst=this.label1[0].value,this.goodsdetail.categorySecond=this.label1[1].value}this.$http.putgoods(this.goodsdetail).then((function(t){t.data.ok?(e.showToast({icon:"none",title:"编辑商品成功"}),e.navigateTo({url:"../postsuccess/postsuccess"})):e.showToast({icon:"none",title:"编辑商品失败，请检查网络"})}))},enterpostsuccess:function(){0==this.imgList.length||""==this.goodsname||0==this.label1.length||0==this.label3.length||0==this.label4.length?e.showToast({title:"请完善页面信息",duration:2e3,icon:"none"}):this.putgoods()},clearall:function(){var t=this;e.showModal({title:"提示",content:"你确定清空所有数据吗",success:function(e){e.confirm?(t.goodsdetail="",t.goodsname="",t.maidian="",t.goodsprice="",t.kucun="",t.imgList="",t.label=[],t.label1=[],t.label2=[],t.label3=[],t.label4=[],t.moresizelist=[]):e.cancel}})}}};t.default=o}).call(this,i(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},154:
/*!********************************************************************************************************!*\
  !*** D:/taocai-uniapp/pages/goodsmanage/goodschange/goodschange.vue?vue&type=style&index=0&lang=scss& ***!
  \********************************************************************************************************/
/*! no static exports found */function(e,t,i){"use strict";i.r(t);var s=i(/*! -!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../学习资料/学习软件/HBuilderX.2.6.5.20200314.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goodschange.vue?vue&type=style&index=0&lang=scss& */155),o=i.n(s);for(var a in s)"default"!==a&&function(e){i.d(t,e,(function(){return s[e]}))}(a);t["default"]=o.a},155:
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/taocai-uniapp/pages/goodsmanage/goodschange/goodschange.vue?vue&type=style&index=0&lang=scss& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,i){}},[[148,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/goodsmanage/goodschange/goodschange.js.map